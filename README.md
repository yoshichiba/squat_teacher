# Squat Teacher Watch App

**Apple Watch専用のスクワットカウンターアプリ**です。  

手首を動かさず、腕を前に固定したままでも膝の曲げ伸ばしを検出し、スクワット回数をリアルタイムにカウントします。

---

## 概要

- Core Motion の **DeviceMotion API** を使用し、重力ベクトルからしゃがみ動作を検知
- しゃがむ → 立つ の1往復を1回としてカウント
- 浅いしゃがみは無視し、一定以上しゃがんだ動作のみカウント
- 1回ごとに軽いバイブレーションで通知
- 10回ごとに強めのバイブレーションで達成感を提供
- 大きな数字でリアルタイムに回数を表示

---

## 仕様

- **フォーム判定**
  - 足は肩幅くらい
  - 腰を落として膝が90度くらいまでしゃがむ
  - 背筋はまっすぐ、腕は前に出して固定してOK
  - **手首の重力方向（`gravity.z`）の変化からしゃがみ深さを判定**
- **カウント**
  - 浅いしゃがみは無視
  - 深いしゃがみ → 立ち上がりで1回カウント
  - 履歴（ローパスフィルタ）を使ってノイズを除去
- **バイブレーション**
  - 正しいフォームの1回ごと → `.click`
  - 10回ごと → `.success`（強め）

---

## 動作環境

- **対応デバイス**：Apple Watch（iPhoneアプリは不要）
- **対応OS**：watchOS 9 以上
- **開発環境**：Xcode 15以上、SwiftUI
- **センサー**：DeviceMotion（CMMotionManager + gravity）

---

## インストール方法

1. このリポジトリをクローン

```bash
git clone <repository_url>
```

2. Xcodeで squat_teacher.xcodeproj を開く

3. ターゲットを Apple Watch に設定

4. 実機またはシミュレータでビルド＆実行

## 使い方

1. Apple Watchでアプリを起動
2. 腕を前に出して固定し、スクワット開始
3. 画面に回数がリアルタイムで表示される
4. 1回ごとに軽いバイブ、10回ごとに強いバイブで達成感を体感

## 注意点

- 浅いしゃがみや腕だけの動きはカウントされません
- deepThreshold と shallowThreshold は実機でのキャリブレーションが必要です
- Apple Watch単体で動作しますが、腕の角度によって感度が変わる場合があります

## 作者

https://x.com/yoshi_chibaaa
